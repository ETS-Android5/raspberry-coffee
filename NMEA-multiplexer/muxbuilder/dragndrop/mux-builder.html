<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Graphical Mux Builder</title>
    <link rel="stylesheet" href="../../web/css/stylesheet.css"/>
    <link rel="stylesheet" href="./style.css"/>

    <script type="text/javascript" src="./script.js"></script>
</head>
<body>

<dialog id="generated-code-dialog" style="min-height: 300px; min-width: 400px; z-index: 50; border-radius: 10px; background-color: rgba(255, 255, 255, 0.85); overflow: hidden;">
    <div class="dialog-header">
      <div style="padding: 10px;">
        <span style="margin-left: 20px;">Dropped content</span>
        <span class="dialog-header-close" onclick="closeGeneratedDialog();">&times</span>
      </div>
    </div>
    <div style="text-align: left; max-height: 300px; overflow-y: scroll;">
        <pre><span id="generated-list"></span></pre> <!-- This contains the final result -->
    </div>
</dialog>    

<h1>Mux builder</h1>

<p>Drag from the sides, drop in the center</p>

<!-- One row, 3 columns -->
<div class="grid-container">

  <div>Available Consumers (aka Input Channels)</div>
  <div>Drop Consumers below</div>
  <div>will go away</div>

  <div class="vertical-scrollable-zone side-div">
    <div id="drag1" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
        <div>
          <span class="close-icon" onclick="remove(this);">&times;</span>
          <span class="channel-description">Serial port input</span>
        </div>
        <div class="draggable-content">
            <span>Serial </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
            <dialog class="editable-prm" style="min-height: 200px;">
              <div class="dialog-header">
                <div style="padding: 10px;">
                  <span style="margin-left: 20px;">Edit Serial Channel Parameters</span>
                  <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
                </div>
              </div>
              <div class="editable-zone serial-channel">
                <table>
                  <tr>
                      <td>Port Name</td>
                      <td><input type="text" class="port-name" size="30" placeholder="Serial Port Name"></td>
                  </tr>
                  <tr>
                      <td>Baud Rate</td>
                      <td><input type="number" class="baud-rate" placeholder="Baud Rate"></td>
                  </tr>
                  <tr>
                      <td>Device Filters</td>
                      <td><input type="text" class="device-filter" placeholder="Device Filters" size="30" title="Comma separated list"></td>
                  </tr>
                  <tr>
                      <td>Sentence Filters</td>
                      <td><input type="text" class="sentence-filter" placeholder="Sentence Filters" size="30" title="Like RMC, GLL,&#13;~GSV, ~GGA to negate the filter."></td>
                  </tr>
                  <tr>
                      <td>Verbose</td>
                      <td><input type="checkbox" class="verbose"></td>
                  </tr>
                  <tr>
                      <td>Reset Interval</td>
                      <td><input type="number" class="reset-interval" placeholder="Reset Interval" value="60000"></td>
                  </tr>
                </table>
              </div>
            </dialog>
        </div>
    </div>
    <div id="drag2" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
        <div>
          <span class="close-icon" onclick="remove(this);">&times;</span>
          <span class="channel-description">TCP server input</span>
        </div>
        <div class="draggable-content">
          <span>TCP </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit TCP Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone tcp-channel">
              <table>
                <tr>
                    <td>Server name or IP</td>
                    <td><input type="text" class="server-name" size="30" placeholder="Server Name"></td>
                </tr>
                <tr>
                    <td>Port</td>
                    <td><input type="number" class="port-num" placeholder="TCP Port"></td>
                </tr>
                <tr>
                    <td>Device Filters</td>
                    <td><input type="text" class="device-filter" placeholder="Device Filters" size="30" title="Comma separated list"></td>
                </tr>
                <tr>
                    <td>Sentence Filters</td>
                    <td><input type="text" class="sentence-filter" placeholder="Sentence Filters" size="30" title="Like RMC, GLL,&#13;~GSV, ~GGA to negate the filter."></td>
                </tr>
                <tr>
                    <td>Verbose</td>
                    <td><input type="checkbox" class="verbose"></td>
                </tr>
              </table>
            </div>
          </dialog>
      </div>
  </div>
    <div id="drag3" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Log file replay</span>
      </div>
      <div class="draggable-content">
        <span>File </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
        <dialog class="editable-prm" style="min-height: 200px;">
          <div class="dialog-header">
            <div style="padding: 10px;">
              <span style="margin-left: 20px;">Edit File Channel Parameters</span>
              <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
            </div>
          </div>
          <div class="editable-zone file-channel">
            . . .
          </div>  
        </dialog>            
      </div>
    </div>
    <div id="drag4" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">WebSocket input</span>
      </div>
      <div class="draggable-content">
        <span>WebSocket </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
        <dialog class="editable-prm" style="min-height: 200px;">
          <div class="dialog-header">
            <div style="padding: 10px;">
              <span style="margin-left: 20px;">Edit WebSocket Channel Parameters</span>
              <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
            </div>
          </div>
          <div class="editable-zone ws-channel">
            . . .
          </div>  
        </dialog>            
      </div>
    </div>
    <div id="drag5" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Temperature & Humidity Sensor input</span>
      </div>
      <div class="draggable-content">
          <span>HTU21DF </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit HTU21DF Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone htu21df-channel">
              . . .
            </div>  
          </dialog>            
        </div>
    </div>
    <div id="drag6" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Temperature, Humidity, Pressure Sensor input</span>
      </div>
      <div class="draggable-content">
          <span>BME280 </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit BME280 Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone bme280-channel">
              . . .
            </div>  
          </dialog>            
        </div>
    </div>
    <div id="drag7" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Temperature, Humidity, Pressure Sensor input</span>
      </div>
      <div class="draggable-content">
          <span>BMP180 </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit BMP180 Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone bmp180-channel">
              . . .
            </div>  
          </dialog>            
        </div>
    </div>
    <div id="drag8" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Magnetometer Sensor input</span>
      </div>
      <div class="draggable-content">
          <span>HCM5883L </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit HCM5883L Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone hcm5883l-channel">
              . . .
            </div>  
          </dialog>            
        </div>
    </div>
    <div id="drag9" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Magnetometer Accelerometer Sensor input</span>
      </div>
      <div class="draggable-content">
          <span>LSM303 </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit LSM303 Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone lsm303-channel">
              . . .
            </div>  
          </dialog>            
        </div>
    </div>
    <div id="drag10" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">UTC Time NMEA input</span>
      </div>
      <div class="draggable-content">
          <span>ZDA </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit ZDA Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone zda-channel">
                . . .
            </div>  
          </dialog>            
        </div>
    </div>
    <div id="drag11" draggable="true" class="draggable-container draggable-channel" ondragstart="drag(event)">
      <div>
        <span class="close-icon" onclick="remove(this);">&times;</span>
        <span class="channel-description">Random input (for debug)</span>
      </div>
      <div class="draggable-content">
          <span>RND </span><span class="edit-icon" onclick="edit(this);" title="Edit Parameters">✏️</span>
          <dialog class="editable-prm" style="min-height: 200px;">
            <div class="dialog-header">
              <div style="padding: 10px;">
                <span style="margin-left: 20px;">Edit RND Channel Parameters</span>
                <span class="dialog-header-close" onclick="closeDialog(this);">&times</span>
              </div>
            </div>
            <div class="editable-zone rnd-channel">
              . . .
            </div>  
          </dialog>            
        </div>
    </div>
  </div>

  <div class="vertical-scrollable-zone " style="border: 1px solid red; border-radius: 4px; background-color: beige;">
      <!-- This is where things are dropped -->
      <div id="drop-div" class="drop-container drop-container-content" ondrop="drop(event)" ondragover="allowDrop(event)">
      </div>
  </div>

  <div class="vertical-scrollable-zone side-div">
      <div id="no-drag-1" draggable="true" class="draggable-container" style="background-color: red;" ondragstart="drag(event)">
        <div class="close-icon" onclick="remove(this);">&times;</div>
        <div class="draggable-content">
            Foreign Element
        </div>
    </div>
  </div>
</div>

<button onclick="dumpIt();"><span style="margin: 20px;">Dump what's in</span></button>

</body>
</html>